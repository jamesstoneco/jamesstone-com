!function(){"use strict";function ZfTabsController($scope,foundationApi){var controller=this,tabs=controller.tabs=$scope.tabs=[],id="";controller.select=function(selectTab){tabs.forEach(function(tab){tab.active=!1,tab.scope.active=!1,tab.scope===selectTab&&(foundationApi.publish(id,["activate",tab]),tab.active=!0,tab.scope.active=!0)})},controller.addTab=function(tabScope){tabs.push({scope:tabScope,active:!1,parentContent:controller.id}),1===tabs.length&&(tabs[0].active=!0,tabScope.active=!0)},controller.getId=function(){return id},controller.setId=function(newId){id=newId}}function zfTabs(foundationApi){function link(scope,element,attrs,controller){scope.id=attrs.id||foundationApi.generateUuid(),scope.showTabContent="true"!==scope.displaced,attrs.$set("id",scope.id),controller.setId(scope.id);var updateTabs=function(){foundationApi.publish(scope.id+"-tabs",scope.tabs)};foundationApi.subscribe(scope.id+"-get-tabs",function(){updateTabs()})}var directive={restrict:"EA",transclude:"true",replace:!0,templateUrl:"components/tabs/tabs.html",controller:"ZfTabsController",scope:{displaced:"@?"},link:link};return directive}function zfTabContent(foundationApi){function link(scope){scope.tabs=scope.tabs||[];var id=scope.target;foundationApi.subscribe(id,function(msg){if("activate"===msg[0]){{msg[1]}scope.tabs.forEach(function(tab){tab.scope.active=!1,tab.active=!1,tab.scope.id===id&&(tab.scope.active=!0,tab.active=!0)})}}),0===scope.tabs.length&&(foundationApi.subscribe(id+"-tabs",function(tabs){scope.tabs=tabs}),foundationApi.publish(id+"-get-tabs",""))}var directive={restrict:"A",transclude:"true",replace:!0,scope:{tabs:"=?",target:"@"},templateUrl:"components/tabs/tab-content.html",link:link};return directive}function zfTab(foundationApi){function link(scope,element,attrs,controller,transclude){scope.id=attrs.id||foundationApi.generateUuid(),scope.active=!1,scope.transcludeFn=transclude,controller.addTab(scope),foundationApi.subscribe(scope.id,function(msg){("show"===msg||"open"===msg||"activate"===msg)&&scope.makeActive()}),scope.makeActive=function(){controller.select(scope)}}var directive={restrict:"EA",templateUrl:"components/tabs/tab.html",transclude:!0,scope:{title:"@"},require:"^zfTabs",replace:!0,link:link};return directive}function zfTabIndividual(foundationApi){function link(scope,element,attrs){{var tab=scope.$eval(attrs.tab);tab.scope.id}tab.scope.transcludeFn(tab.scope,function(tabContent){element.append(tabContent)}),foundationApi.subscribe(tab.scope.id,function(){foundationApi.publish(tab.parentContent,["activate",tab.scope.id]),scope.$apply()})}var directive={restrict:"EA",transclude:"true",link:link};return directive}function zfTabHref(foundationApi){function link(scope,element,attrs){function makeActive(){element.parent().children().removeClass("is-active"),element.addClass("is-active")}var target=attrs.zfTabHref;foundationApi.subscribe(target,function(msg){("activate"===msg||"show"===msg||"open"===msg)&&makeActive()}),element.on("click",function(e){foundationApi.publish(target,"activate"),makeActive(),e.preventDefault()})}var directive={restrict:"A",replace:!1,link:link};return directive}function zfTabCustom(){function link(scope,element){var children=element.children();angular.element(children[0]).addClass("is-active")}var directive={restrict:"A",replace:!1,link:link};return directive}function zfTabContentCustom(foundationApi){function link(scope,element){function activateTabs(tabId){var tabNodes=element.children();angular.forEach(tabNodes,function(node){var el=angular.element(node);el.removeClass("is-active"),el.attr("id")===tabId&&el.addClass("is-active")})}var tabs=[],children=element.children();angular.forEach(children,function(node){if(node.id){var tabId=node.id;if(tabs.push(tabId),foundationApi.subscribe(tabId,function(msg){("activate"===msg||"show"===msg||"open"===msg)&&activateTabs(tabId)}),1===tabs.length){var el=angular.element(node);el.addClass("is-active")}}})}return{restrict:"A",link:link}}angular.module("foundation.tabs",["foundation.core"]).controller("ZfTabsController",ZfTabsController).directive("zfTabs",zfTabs).directive("zfTabContent",zfTabContent).directive("zfTab",zfTab).directive("zfTabIndividual",zfTabIndividual).directive("zfTabHref",zfTabHref).directive("zfTabCustom",zfTabCustom).directive("zfTabContentCustom",zfTabContentCustom),ZfTabsController.$inject=["$scope","FoundationApi"],zfTabs.$inject=["FoundationApi"],zfTabContent.$inject=["FoundationApi"],zfTab.$inject=["FoundationApi"],zfTabIndividual.$inject=["FoundationApi"],zfTabHref.$inject=["FoundationApi"],zfTabCustom.$inject=["FoundationApi"],zfTabContentCustom.$inject=["FoundationApi"]}();