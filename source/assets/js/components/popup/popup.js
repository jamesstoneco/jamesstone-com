!function(){"use strict";function zfPopup(foundationApi){function compile(){function preLink(scope,iElement,iAttrs){iAttrs.$set("zf-closable","popup")}function postLink(scope,element,attrs){function tetherElement(target){tetherInit||(scope.target=document.getElementById(scope.target?scope.target:target),tether=new Tether({element:element[0],target:scope.target,attachment:attachment,enable:!1}),tetherInit=!0)}scope.active=!1,scope.target=scope.target||!1;var attachment=scope.pinTo||"top center",tetherInit=!1,tether={};foundationApi.subscribe(attrs.id,function(msg){"show"===msg[0]||"open"===msg[0]?scope.show(msg[1]):"close"===msg[0]||"hide"===msg[0]?scope.hide():"toggle"===msg[0]&&scope.toggle(msg[1]),scope.$apply()}),scope.hide=function(){scope.active=!1,tetherElement(newTarget),tether.disable()},scope.show=function(newTarget){scope.active=!0,tetherElement(newTarget),tether.enable()},scope.toggle=function(newTarget){scope.active=!scope.active,tetherElement(newTarget),scope.active?tether.enable():tether.disable()}}return{pre:preLink,post:postLink}}var directive={restrict:"EA",transclude:!0,replace:!0,templateUrl:"components/popup/popup.html",scope:{pinTo:"@?",pinAt:"@?"},compile:compile};return directive}function zfPopupToggle(foundationApi){function link(scope,element,attrs){var target=attrs.zfPopupToggle,id=attrs.id||foundationApi.generateUuid();attrs.$set("id",id),element.on("click",function(e){foundationApi.publish(target,["toggle",id]),e.preventDefault()})}var directive={restrict:"A",link:link};return directive}angular.module("foundation.popup",["foundation.core"]).directive("zfPopup",zfPopup).directive("zfPopupToggle",zfPopupToggle),zfPopup.$inject=["FoundationApi"],zfPopupToggle.$inject=["FoundationApi"]}();